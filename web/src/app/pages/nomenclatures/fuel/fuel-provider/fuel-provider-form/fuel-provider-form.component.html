<form [formGroup]="form" (ngSubmit)="onSubmit()" *ngIf="form">
  <div nz-row nzGutter="24">
    <div nz-col nzSpan="10">
      <nz-card>
        <div nz-row nzGutter="24">
          <div nz-col nzSpan="24">
            <vfm-form-item label="ID" labelSpan="24">
              <vfm-text-input id="id" formControlName="id"></vfm-text-input>
            </vfm-form-item>
          </div>
          <div nz-col nzSpan="24">
            <vfm-form-item label="Name" labelSpan="24">
              <vfm-text-input id="name" formControlName="name"></vfm-text-input>
            </vfm-form-item>
          </div>
          <div nz-col nzSpan="24">
            <vfm-form-item label="Description" labelSpan="24">
              <vfm-text-input id="description" formControlName="description"></vfm-text-input>
            </vfm-form-item>
          </div>
          <div nz-col nzSpan="24">
            <vfm-form-item>
              <label nz-checkbox id="status" formControlName="status"
                >Is active</label
              >
            </vfm-form-item>
          </div>
        </div>
      </nz-card>
    </div>
    <div nz-col nzSpan="14">
      <nz-card
        nzTitle="Fuels"
        [nzSize]="'small'"
        [nzBodyStyle]="{ padding: '10px 15px' }"
        [nzExtra]="extraTemplate"
      >
        <div
          formArrayName="fuelOptions"
          *ngIf="form.value['fuelOptions'].length > 0"
        >
          <div
            nz-col
            nzSpan="24"
            class="container"
            *ngFor="
              let item of getFuelOptionsControls;
              index as fuelOptionIndex
            "
          >
            <div nz-row [formGroupName]="fuelOptionIndex" nzGutter="20">
              <div nz-col nzSpan="11">
                <vfm-form-item label="Name">
                  <vfm-select id="name{{ fuelOptionIndex }}"
                              formControlName="name"  [options]="fuelOptions"></vfm-select>
                </vfm-form-item>
              </div>
              <div nz-col>
                <vfm-form-item>
                  <button
                    type="button"
                    nzDanger
                    id="remove"
                    nz-button
                    nzType="default"
                    (click)="removeFuelOption(fuelOptionIndex)"
                  >
                    Delete
                  </button>
                </vfm-form-item>
              </div>
            </div>
          </div>
        </div>
        <div nz-col nzSpan="24" *ngIf="form.value['fuelOptions'].length === 0">
          Empty
        </div>
      </nz-card>
    </div>
  </div>

  <ng-template #extraTemplate>
    <button
      type="button"
      id="add"
      nz-button
      nzType="default"
      (click)="addFuelOption()"
      [disabled]="form.value['fuelOptions'].length===fuelOptions.length"
    >
      <i nz-icon nzType="plus"></i>
      <span>Add Fuel</span>
    </button>
  </ng-template>

  <div nz-row nzGutter="20" nzJustify="end" style="margin: 10px">
    <div nz-col>
      <button nz-button type="submit" nzType="primary">
        {{ form.getRawValue().id ? "Edit" : "Add" }}
      </button>
    </div>
  </div>
</form>
